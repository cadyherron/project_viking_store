<h1 class="text-center">Addresses</h1>
<h4 class="text-center">Create new addresses from within <%= link_to "User", users_path %> profiles</h4>


<div class="panel panel-default">

  <table class="table table-bordered table-striped">
    <thead>
      <tr>
        <th>ID</th>
        <th>User</th>
        <th>Address</th>
        <th>City</th>
        <th>State</th>
        <th>Orders</th>
        <th>Created</th>
        <th>Show</th>
        <th>Edit</th>
        <th>Delete</th>
      </tr>
    </thead>
    <tbody>

    <% @addresses.each do |address| %>
      <tr>
        <td><%= address.id %></td>
        <td>
        <% if address.user %>
          <%= link_to "#{address.user.first_name} #{address.user.last_name}", user_path(address.user)%>
        <% end %>
        </td>
        <td><%= address.street_address %></td>
        <td><%= address.city.name%></td>
        <td><%= address.state.name%></td>
        <td><%= address.user.orders.count if address.user %></td>
        <td><%= address.created_at.strftime("%Y-%m-%d") %></td>
        <td><%= link_to "show", address_path(address) %></td>
        <td><%= link_to "edit", edit_address_path(address) %></td>
        <td><%= link_to "delete", address_path(address), method: :delete, data: { confirm: "Are you sure you want to delete?" } %></td>
      </tr>

    <% end %>

    </tbody>
  </table>

</div>